diff -Nura libarchive-v3.6.2/libarchive/test/test_write_disk_secure.c libarchive-v3.6.2-patchdir/libarchive/test/test_write_disk_secure.c
--- libarchive-v3.6.2/libarchive/test/test_write_disk_secure.c	2022-12-09 21:28:16.000000000 +0800
+++ libarchive-v3.6.2-patchdir/libarchive/test/test_write_disk_secure.c	2024-08-02 15:25:25.595723548 +0800
@@ -90,24 +90,24 @@
 
 	/* Write an absolute symlink to /tmp. */
 	assert((ae = archive_entry_new()) != NULL);
-	archive_entry_copy_pathname(ae, "/tmp/libarchive_test-test_write_disk_secure-absolute_symlink");
+	archive_entry_copy_pathname(ae, "/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_symlink");
 	archive_entry_set_mode(ae, S_IFLNK | 0777);
-	archive_entry_set_symlink(ae, "/tmp");
+	archive_entry_set_symlink(ae, "/data/local/tmp");
 	archive_write_disk_set_options(a, 0);
 	assert(0 == archive_write_header(a, ae));
 	assert(0 == archive_write_finish_entry(a));
 
 	/* With security checks enabled, this should fail. */
 	assert(archive_entry_clear(ae) != NULL);
-	archive_entry_copy_pathname(ae, "/tmp/libarchive_test-test_write_disk_secure-absolute_symlink/libarchive_test-test_write_disk_secure-absolute_symlink_path.tmp");
+	archive_entry_copy_pathname(ae, "/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_symlink/libarchive_test-test_write_disk_secure-absolute_symlink_path.tmp");
 	archive_entry_set_mode(ae, S_IFREG | 0777);
 	archive_write_disk_set_options(a, ARCHIVE_EXTRACT_SECURE_SYMLINKS);
 	failure("Extracting a file through an absolute symlink should fail here.");
 	assertEqualInt(ARCHIVE_FAILED, archive_write_header(a, ae));
 	archive_entry_free(ae);
-	assertFileNotExists("/tmp/libarchive_test-test_write_disk_secure-absolute_symlink/libarchive_test-test_write_disk_secure-absolute_symlink_path.tmp");
-	assert(0 == unlink("/tmp/libarchive_test-test_write_disk_secure-absolute_symlink"));
-	unlink("/tmp/libarchive_test-test_write_disk_secure-absolute_symlink_path.tmp");
+	assertFileNotExists("/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_symlink/libarchive_test-test_write_disk_secure-absolute_symlink_path.tmp");
+	assert(0 == unlink("/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_symlink"));
+	unlink("/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_symlink_path.tmp");
 
 	/* Create another link. */
 	assert((ae = archive_entry_new()) != NULL);
@@ -227,23 +227,23 @@
 	 * extract an absolute path.
 	 */
 	assert((ae = archive_entry_new()) != NULL);
-	archive_entry_copy_pathname(ae, "/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
+	archive_entry_copy_pathname(ae, "/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
 	archive_entry_set_mode(ae, S_IFREG | 0777);
 	assert(0 == archive_write_header(a, ae));
 	assert(0 == archive_write_finish_entry(a));
-	assertFileExists("/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
-	assert(0 == unlink("/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp"));
+	assertFileExists("/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
+	assert(0 == unlink("/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp"));
 
 	/* But with security checks enabled, this should fail. */
 	assert(archive_entry_clear(ae) != NULL);
-	archive_entry_copy_pathname(ae, "/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
+	archive_entry_copy_pathname(ae, "/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
 	archive_entry_set_mode(ae, S_IFREG | 0777);
 	archive_write_disk_set_options(a, ARCHIVE_EXTRACT_SECURE_NOABSOLUTEPATHS);
 	failure("Extracting an absolute path should fail here.");
 	assertEqualInt(ARCHIVE_FAILED, archive_write_header(a, ae));
 	archive_entry_free(ae);
 	assert(0 == archive_write_finish_entry(a));
-	assertFileNotExists("/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
+	assertFileNotExists("/data/local/tmp/libarchive_test-test_write_disk_secure-absolute_path.tmp");
 
 	assertEqualInt(ARCHIVE_OK, archive_write_free(a));
 
diff -Nura libarchive-v3.6.2/libarchive/test/test_write_open_memory.c libarchive-v3.6.2-patchdir/libarchive/test/test_write_open_memory.c
--- libarchive-v3.6.2/libarchive/test/test_write_open_memory.c	2022-12-09 21:28:16.000000000 +0800
+++ libarchive-v3.6.2-patchdir/libarchive/test/test_write_open_memory.c	2024-08-02 15:22:34.550205585 +0800
@@ -33,7 +33,7 @@
 	unsigned int i;
 	struct archive *a;
 	struct archive_entry *ae;
-	const char *name="/tmp/test";
+	const char *name="/data/local/tmp/test";
 
 	/* Create a simple archive_entry. */
 	assert((ae = archive_entry_new()) != NULL);
diff -Nura libarchive-v3.6.2/test_utils/test_main.c libarchive-v3.6.2-patchdir/test_utils/test_main.c
--- libarchive-v3.6.2/test_utils/test_main.c	2022-12-09 21:28:16.000000000 +0800
+++ libarchive-v3.6.2-patchdir/test_utils/test_main.c	2024-08-02 15:22:58.921789733 +0800
@@ -3965,7 +3965,7 @@
 	else if (getenv("TEMPDIR") != NULL)
 		tmp = getenv("TEMPDIR");
 	else
-		tmp = "/tmp";
+		tmp = "/data/local/tmp";
 
 	/* Allow -d to be controlled through the environment. */
 	if (getenv(ENVBASE "_DEBUG") != NULL)
