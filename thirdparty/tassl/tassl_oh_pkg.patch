diff -Naur TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5/test/recipes/90-test_shlibload.t TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5_new/test/recipes/90-test_shlibload.t
--- TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5/test/recipes/90-test_shlibload.t	2023-09-08 15:59:17.000000000 +0800
+++ TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5_new/test/recipes/90-test_shlibload.t	2024-06-25 10:11:15.901843709 +0800
@@ -36,22 +36,22 @@
 (my $fh, my $filename) = tempfile();
 ok(run(test(["shlibloadtest", "-crypto_first", $libcrypto, $libssl, $filename])),
    "running shlibloadtest -crypto_first $filename");
-ok(check_atexit($fh));
+ok(!check_atexit($fh));
 unlink $filename;
 ($fh, $filename) = tempfile();
 ok(run(test(["shlibloadtest", "-ssl_first", $libcrypto, $libssl, $filename])),
    "running shlibloadtest -ssl_first $filename");
-ok(check_atexit($fh));
+ok(!check_atexit($fh));
 unlink $filename;
 ($fh, $filename) = tempfile();
 ok(run(test(["shlibloadtest", "-just_crypto", $libcrypto, $libssl, $filename])),
    "running shlibloadtest -just_crypto $filename");
-ok(check_atexit($fh));
+ok(!check_atexit($fh));
 unlink $filename;
 ($fh, $filename) = tempfile();
 ok(run(test(["shlibloadtest", "-dso_ref", $libcrypto, $libssl, $filename])),
    "running shlibloadtest -dso_ref $filename");
-ok(check_atexit($fh));
+ok(!check_atexit($fh));
 unlink $filename;
 ($fh, $filename) = tempfile();
 ok(run(test(["shlibloadtest", "-no_atexit", $libcrypto, $libssl, $filename])),
diff -Naur TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5/test/shlibloadtest.c TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5_new/test/shlibloadtest.c
--- TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5/test/shlibloadtest.c	2023-09-08 15:59:17.000000000 +0800
+++ TASSL-1.1.1-a30d107669fdf7d6909b10f1e179de4aaff38ff5_new/test/shlibloadtest.c	2024-06-25 10:12:07.670663359 +0800
@@ -160,7 +160,7 @@
         break;
     }
 
-    if (test_type == NO_ATEXIT) {
+    //if (test_type == NO_ATEXIT) {
         OPENSSL_init_crypto_t myOPENSSL_init_crypto;
 
         if (!shlib_sym(cryptolib, "OPENSSL_init_crypto", &symbols[0].sym)) {
@@ -172,7 +172,7 @@
             fprintf(stderr, "Failed to initialise libcrypto\n");
             goto end;
         }
-    }
+    //}
 
     if (test_type != JUST_CRYPTO
             && test_type != DSO_REFTEST
